parameters:
    sylius.cart_twig.class: Hypebeast\Bundle\WebBundle\Twig\HypebeastCartExtension
    sylius.movement_history_twig.class: Hypebeast\Bundle\WebBundle\Twig\HypebeastMovementHistoryExtension
    sylius.form.type.property.class: Hypebeast\Bundle\WebBundle\Form\Type\PropertyType
    sylius.checkout_step.shipping.class: Hypebeast\Bundle\WebBundle\Checkout\Step\ShippingStep
    sylius.menu_builder.backend.class: Hypebeast\Bundle\WebBundle\Menu\BackendMenuBuilder
    sylius.form.type.order_filter.class: Hypebeast\Bundle\WebBundle\Form\Type\Filter\OrderFilterType
    sylius.form.type.shipment.class: Hypebeast\Bundle\CoreBundle\Form\Type\ShipmentType
    sylius.form.type.product_property.class: Hypebeast\Bundle\WebBundle\Form\Type\ProductPropertyType

services:
    sylius.form.type.shipment:
        class: %sylius.form.type.shipment.class%
        arguments:
            - %sylius.model.shipment.class%
            - []
        tags:
            - { name: form.type, alias: sylius_shipment }

    sylius.hypebeast_twig:
        class: Hypebeast\Bundle\WebBundle\Twig\HypebeastExtension
        tags:
            - { name: twig.extension }

    sylius.movement_history_twig:
        class: %sylius.movement_history_twig.class%
        arguments:
            - @router
            - @translator
        tags:
            - { name: twig.extension }

    hypebeast.twig.bootstrap_form_extension:
        class: Hypebeast\Bundle\WebBundle\Twig\BootstrapFormExtension
        tags:
            - { name: twig.extension }

    sylius.hypebeast.security.provider:
        class: Hypebeast\Bundle\WebBundle\Security\HypebeastProvider
        arguments:
            - @fos_user.user_provider.username

    sylius.hypebeast.security.listener:
        class: Hypebeast\Bundle\WebBundle\Security\HypebeastListener
        arguments:
            - @security.context
            - @security.authentication.manager
            - %sylius.hypebeast.key%

    sylius.hypebeast.default.country.listener:
        class: Hypebeast\Bundle\WebBundle\EventListener\DefaultCountryListener
        arguments:
            - @sylius.repository.zone
            - @sylius.repository.zone_member_country
            - @sylius.repository.country
            - @maxmind.geoip
            - %sylius.hypebeast.default.country%
            - %sylius.hypebeast.fake.ip%
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }

    sylius.form.type.address:
        class: Hypebeast\Bundle\WebBundle\Form\Type\AddressType
        arguments:
            - @service_container
            - %sylius.model.address.class%
            - %sylius.validation_group.address%
            - @sylius.form.listener.address
        tags:
        - { name: form.type, alias:sylius_address }

    store.menu_builder:
        class: Hypebeast\Bundle\WebBundle\Menu\StoreMenuBuilder
        arguments:
            - @knp_menu.factory
            - @security.context
            - @translator
            - @request
        scope: request

    store.menu.user:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createUserMenu
        arguments:
            - @sylius.cart_provider
        tags:
            - { name: knp_menu.menu, alias: store.user }

    store.menu.mobile:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createMobileMenu
        arguments:
            - @sylius.cart_provider
        tags:
            - { name: knp_menu.menu, alias: store.mobile }

    store.menu.store:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createStoreMenu
        tags:
            - { name: knp_menu.menu, alias: store.menu }

    store.menu.brands:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createBrandsMenu
        tags:
            - { name: knp_menu.menu, alias: store.brands }

    store.menu.clothing:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createClothingMenu
        tags:
            - { name: knp_menu.menu, alias: store.clothing }

    store.menu.accessories:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createAccessoriesMenu
        tags:
            - { name: knp_menu.menu, alias: store.accessories }

    store.menu.sale:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder
        factory_method: createSaleMenu
        tags:
            - { name: knp_menu.menu, alias: store.sale }

    store.menu_builder.frontend:
        class: Hypebeast\Bundle\WebBundle\Menu\FrontendMenuBuilder
        arguments:
            - @knp_menu.factory
            - @security.context
            - @translator

    store.menu.frontend.account:
        class: Knp\Menu\MenuItem
        factory_service: store.menu_builder.frontend
        factory_method: createAccountMenu
        tags:
            - { name: knp_menu.menu, alias: store.frontend.account }
